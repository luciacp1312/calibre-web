{% extends "layout.html" %}
{% block title %}{{ title }}{% endblock %}
{% block body %}
<div class="container">
    <h1>{{ thread.title }}</h1>
    <p>Started by {{ thread.user.username }} on {{ thread.created_at }}</p>
    <a href="{{ url_for('add_post', thread_id=thread.id) }}" class="btn btn-primary">Responder</a>
    <a href="{{ url_for('view_forum', forum_id=thread.forum.id) }}" class="btn btn-secondary mt-3">Volver al Foro</a>
    <div class="posts">
        {% for post in posts %}
        <div class="post-box">
            <div class="post-header">
                <strong>{{ post.user.username }}</strong> - {{ post.created_at }}
            </div>
            <div class="post-content">
                <p>{{ post.content }}</p>
            </div>
            <div class="post-actions">
                {% if current_user.role_admin() %}
                <form action="{{ url_for('delete_post', post_id=post.id) }}" method="post" style="display:inline;">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this post?')">Delete</button>
                </form>
                {% endif %}
                <a href="{{ url_for('add_post', thread_id=thread.id) }}" class="btn btn-secondary btn-sm">Responder</a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
<style>
.post-box {
    border: 1px solid #ccc;
    padding: 15px;
    margin-bottom: 10px;
    border-radius: 5px;
}
.post-header {
    font-weight: bold;
    margin-bottom: 10px;
}
</style>
{% endblock %}
